# 🚀 水道検針アプリ - デプロイメントチェックリスト

## ✅ プリデプロイ確認事項

### **1. ファイル統合状況**
- [x] `gas_dialog_functions.gs` (1089行) - メイン統合ファイル
- [x] `property_select_gas.html` (619行) - 物件選択画面
- [x] `room_select_gas.html` (482行) - 部屋選択画面  
- [x] `meter_reading_gas.html` (1285行) - 検針入力画面
- [x] `README.md` (130行) - プロジェクト説明書

### **2. 機能統合確認**
- [x] 物件・部屋・検針データ CRUD API
- [x] GAS ダイアログ機能
- [x] Web App API エンドポイント
- [x] 総合カスタム処理機能 (11種類)
- [x] 実行コンテキストエラー対策
- [x] 日本語シート名対応

### **3. エラーチェック**
- [x] HTML構文エラー: 0件 (GASテンプレート構文の false positive は除く)
- [x] JavaScript エラー: なし
- [x] 関数の重複定義: なし
- [x] API エンドポイントの整合性: ✅

## 🔧 デプロイ手順

### **Phase 1: GAS プロジェクト作成**

1. **新しい Google Spreadsheet を作成**
   ```
   - ファイル名: 「水道検針管理システム」
   - 必要シート作成: 物件マスタ, 部屋マスタ
   ```

2. **GAS プロジェクト設定**
   ```
   1. 拡張機能 → Apps Script
   2. プロジェクト名: 「水道検針システム_統合版」
   3. gas_dialog_functions.gs をコピー&ペースト
   ```

3. **HTML ファイル追加**
   ```
   ファイル → 新規 → HTML ファイル:
   - property_select_gas (拡張子なし)
   - room_select_gas (拡張子なし)  
   - meter_reading_gas (拡張子なし)
   ```

### **Phase 2: 初期設定実行**

1. **トリガー設定**
   ```javascript
   // GAS エディタで実行
   setupOnOpenTrigger();
   ```

2. **スプレッドシート確認**
   ```
   1. スプレッドシートを再読み込み (F5)
   2. メニューバー確認:
      - 「水道検針」メニュー
      - 「総合カスタム処理」メニュー
   ```

### **Phase 3: 動作テスト**

1. **基本機能テスト**
   ```
   1. 「水道検針」→「アプリを開く」
   2. 物件選択画面の表示確認
   3. 部屋選択画面の遷移確認
   4. 検針入力画面の動作確認
   ```

2. **API テスト**
   ```
   1. getProperties() - 物件一覧取得
   2. getRooms(propertyId) - 部屋一覧取得
   3. getMeterReadings(propertyId, roomId) - 検針データ取得
   4. updateMeterReadings() - データ更新
   ```

3. **総合カスタム処理テスト**
   ```
   - 物件IDフォーマット修正
   - 空行削除処理
   - データ整合性チェック
   - その他8機能の動作確認
   ```

### **Phase 4: Web App 設定 (オプション)**

1. **デプロイ設定**
   ```
   1. デプロイ → 新しいデプロイ
   2. 種類: ウェブアプリ
   3. 実行者: 自分
   4. アクセス権: 適切に設定
   ```

2. **Web App テスト**
   ```
   - デプロイ URL でアクセス
   - 物件選択 → 部屋選択の画面遷移
   - API レスポンスの確認
   ```

## 🎯 成功基準

### **必須項目**
- [ ] メニューが正常に表示される
- [ ] 物件選択ダイアログが開く
- [ ] 部屋選択画面に正常遷移
- [ ] 検針データの入力・保存が可能
- [ ] 総合カスタム処理が実行できる

### **推奨項目**
- [ ] Web App として正常にアクセス可能
- [ ] モバイル環境での動作確認
- [ ] 大量データでのパフォーマンス確認
- [ ] エラーハンドリングの動作確認

## 🚨 注意事項

### **実行コンテキスト**
- スクリプトエディタから直接実行せず、必ずスプレッドシートのメニューから実行
- トリガーが正しく設定されていることを確認

### **データ整合性**
- 物件マスタ・部屋マスタの形式を事前確認
- 検針データシートが自動作成されることを確認

### **権限設定**
- GAS の実行権限を適切に設定
- Web App の場合はアクセス権限を慎重に設定

---

**最終更新**: {current_date}  
**プロジェクト状態**: デプロイ準備完了 ✅  
**統合ファイル数**: 5個 (GAS: 1, HTML: 3, 説明書: 1)
